What is MongoDB?
MongoDB is a NoSQL, document-oriented database that stores data in JSON-like documents (BSON) instead of rows and columns like traditional SQL databases. 
It is designed for high performance, scalability, and flexibility.

One-line Answer ‚≠ê
MongoDB is a NoSQL database that stores data as JSON-like documents and supports high scalability and performance.

Key Characteristics of MongoDB
1Ô∏è‚É£ Document-Oriented
Data is stored as documents (key‚Äìvalue pairs).
Similar to JSON, but internally stored as BSON (Binary JSON).

{
  "_id": "123",
  "name": "Suyog",
  "skills": ["JS", "Node", "MongoDB"]
}

2Ô∏è‚É£ Schema-Less (Flexible Schema)
Documents in the same collection can have different fields (structure).
Easy to adapt to changing requirements.
Easy to modify data models

3Ô∏è‚É£ High Performance
Supports indexes, in-memory processing, and fast reads/writes.

4Ô∏è‚É£ Scalable
Horizontal scaling using sharding.
Handles large amounts of data efficiently.
Handles large datasets & high traffic

5Ô∏è‚É£ High Availability
Uses replica sets (primary + secondary nodes).
Automatic failover support.

6Ô∏è‚É£ Rich Query Language
Powerful querying using MongoDB Query Language (MQL)
Supports CRUD operations, aggregation, filtering, sorting, and indexing.
db.users.find({ age: { $gt: 18 } });


Where is MongoDB Used?
MERN / MEAN stack applications
Real-time applications
E-commerce platforms
Content management systems
Big data & analytics


Common Interview Follow-ups
‚ùì Is MongoDB relational?
üëâ No, it is a NoSQL database.

‚ùì What format does MongoDB use?
üëâ BSON (Binary JSON).

‚ùì Why use MongoDB?
üëâ For flexibility, scalability, and fast development.

One-Minute Interview Answer ‚≠ê
MongoDB is a NoSQL, document-based database that stores data in JSON-like format called BSON. It is schema-less, scalable, and provides high performance, 
making it suitable for modern web applications.


| Feature        | MongoDB                      | SQL Databases         |
| -------------- | ---------------------------- | --------------------- |
| Schema         | Flexible, schema-less        | Fixed schema          |
| Data storage   | JSON/BSON documents          | Tables, rows, columns |
| Relationships  | Embedded or references       | Joins & foreign keys  |
| Scaling        | Horizontal (Sharding)        | Vertical              |
| Query language | MongoDB Query Language (MQL) | SQL                   |
| Joins          | Limited                      | Strong                   |
| Performance    | High for big data            | High for structured data |


When to Use MongoDB?
‚úî Rapid development
‚úî Large & unstructured data
‚úî Scalable web apps

When to Use SQL?
‚úî Strong relationships
‚úî Complex joins
‚úî Financial & transactional systems


2Ô∏è‚É£ Features of MongoDB
Document-oriented: Data stored as JSON/BSON documents
Schema-less: Flexible structure, no fixed schema
High performance: Indexing, in-memory processing
Horizontal scaling: Sharding support
Replication: High availability via replica sets
Aggregation Framework: Advanced data queries
Open Source


Visual Representation
MongoDB
 ‚îî‚îÄ‚îÄ Database
     ‚îî‚îÄ‚îÄ Collection
         ‚îî‚îÄ‚îÄ Document
             ‚îî‚îÄ‚îÄ Fields



1Ô∏è‚É£ Database
A database is the top-level container
Holds multiple collections

use myDatabase

2Ô∏è‚É£ Collection
A collection is a group of documents
Similar to a table in SQL
No fixed schema

db.createCollection("users")

3Ô∏è‚É£ Document
A document is a single record stored as BSON
Similar to a row in SQL

{
  "_id": ObjectId("64ab..."),
  "name": "Suyog",
  "email": "suyog@gmail.com",
  "age": 23
}

4Ô∏è‚É£ Fields
Key-value pairs inside a document
Similar to columns

"name": "Suyog"

5Ô∏è‚É£ BSON (Binary JSON)
MongoDB stores documents as BSON
Supports extra data types (Date, ObjectId, Binary)

MongoDB Structure vs SQL Structure
| MongoDB    | SQL      |
| ---------- | -------- |
| Database   | Database |
| Collection | Table    |
| Document   | Row      |
| Field      | Column   |



Internal MongoDB Components (Interview Important)
6Ô∏è‚É£ _id Field
Unique identifier for each document
Automatically generated if not provided

"_id": ObjectId("507f1f77bcf86cd799439011")

7Ô∏è‚É£ Indexes
Improve query performance
Created on fields

db.users.createIndex({ email: 1 })

8Ô∏è‚É£ Embedded Documents
Documents inside documents
Reduces joins

{
  "name": "Suyog",
  "address": {
    "city": "Pune",
    "pincode": 411001
  }
}

9Ô∏è‚É£ Arrays
Store multiple values in a field
"skills": ["JS", "Node", "MongoDB"]


One-Minute Interview Answer ‚≠ê
MongoDB structure consists of databases containing collections, collections containing documents, and documents made of fields stored in BSON format,
allowing flexible and scalable data storage.

Frequently Asked Questions
‚ùì Is MongoDB schema-less?
‚úî Yes, but schemas can be enforced using Mongoose.

‚ùì What is BSON?
‚úî Binary JSON used internally by MongoDB.



What is Mongoose?
Mongoose is an Object Data Modeling (ODM) library for MongoDB and Node.js that provides a schema-based solution to model application data.

Simple definition (1-liner):
Mongoose helps you interact with MongoDB using schemas, models, and validations.

Why Use Mongoose? (Interview Favorite ‚≠ê)
MongoDB is schema-less ‚Üí Mongoose adds structure & control.
‚úî Schema definition
‚úî Data validation
‚úî Middleware (hooks)
‚úî Relationships (populate)
‚úî Cleaner CRUD syntax


Mongoose Architecture (Flow)
Node.js App
   ‚Üì
Mongoose
   ‚Üì
MongoDB Database


Core Concepts of Mongoose
1Ô∏è‚É£ Schema
Defines the structure of documents.

const mongoose = require("mongoose");

const userSchema = new mongoose.Schema({
  name: { type: String, required: true },
  email: { type: String, unique: true },
  age: Number,
});


2Ô∏è‚É£ Model
A model is a wrapper around the schema used to perform CRUD operations.

const User = mongoose.model("User", userSchema);


3Ô∏è‚É£ Document
An instance of a model.

const user = new User({ name: "Suyog", email: "suyog@gmail.com" });
await user.save();




2Ô∏è‚É£ CRUD Operations with Mongoose

*******************************************************
A. Create (Insert Documents)

// Single Document
User.create({ name: "Amit", age: 25 });
//         OR
const user = new User({ name: 'Suyog', age: 23, email: 'suyog@email.com' });
await user.save();

// Multiple Documents
await User.insertMany([
  { name: 'Rahul', age: 25, email: 'rahul@email.com' },
  { name: 'Amit', age: 22, email: 'amit@email.com' }
]);


*******************************************************
B. Read (Query Documents)

// Find all users
const users = await User.find();

// Find by condition
const adultUsers = await User.find({ age: { $gte: 18 } });

// Find one
const su = await User.findOne({ name: 'Suyog' });

// Find by ID
const userById = await User.findById('634b9a7e6f5e4f1a2b8c9d0e');


*******************************************************

C. Update (Modify Documents)

User.findByIdAndUpdate(id, { age: 30 });

// Update one document
await User.updateOne({ name: 'Suyog' }, { $set: { age: 24 } });

// Update multiple documents
await User.updateMany({ age: { $lt: 23 } }, { $inc: { age: 1 } });

// Find and update, return updated document
const updatedUser = await User.findOneAndUpdate(
  { name: 'Rahul' },
  { age: 26 },
  { new: true } // returns updated document
);


*******************************************************

D. Delete (Remove Documents)

// Delete one
await User.deleteOne({ name: 'Amit' });

// Delete many
await User.deleteMany({ age: { $lt: 20 } });

// Find by ID and delete
await User.findByIdAndDelete('634b9a7e6f5e4f1a2b8c9d0e');

*******************************************************

4Ô∏è‚É£ Validation & Default Values
const productSchema = new mongoose.Schema({
  name: { type: String, required: true },
  price: { type: Number, default: 0, min: 0 },
  inStock: { type: Boolean, default: true }
});

const Product = mongoose.model('Product', productSchema);

required ‚Üí field must exist
default ‚Üí default value
min, max ‚Üí numerical validation




Middleware (Hooks) ‚≠ê‚≠ê‚≠ê
Used to run logic before or after database actions.

userSchema.pre("save", function (next) {
  this.name = this.name.toUpperCase();
  next();
});

Types:
pre
post


Relationships & Populate

B. References (Normalized)
Store ObjectId references to documents in another collection
Good for one-to-many or many-to-many relationships

Reference Relationship
const postSchema = new mongoose.Schema({
  title: String,
  user: { type: mongoose.Schema.Types.ObjectId, ref: "User" }
});


3Ô∏è‚É£ Using Populate in Mongoose
Populate replaces the ObjectId reference with the actual document data.

Populate
Post.find().populate("user");


‚ùì Can Mongoose handle relations?
Yes, via references (populate) or embedded documents.



Indexes
Improve query performance.
userSchema.index({ email: 1 });


Connection using connection string
mongoose.connect("mongodb://localhost:27017/mydb");


*****************************************************
const mongoose = require('mongoose');
const userSchema = new mongoose.Schema({
  name: String,
  age: Number,
  skills: [String]
});

const User = mongoose.model('User', userSchema);
*****************************************************

‚ùì What is _id?
Every document has a unique _id field (ObjectId by default).


Schema ‚Üí defines structure & validation
Model ‚Üí represents collection and allows CRUD operations

One-Minute Interview Answer ‚≠ê
Mongoose is an ODM library for MongoDB that provides schema-based modeling, validation, middleware, and relationships, 
making MongoDB easier and safer to use in Node.js applications.



‚ùì How is data queried in MongoDB?
Using MongoDB Query Language (MQL) with operators like $eq, $gt, $in.


6Ô∏è‚É£ Important MongoDB Operators
| Operator | Description             |
| -------- | ----------------------- |
| `$eq`    | Equal to                |
| `$gt`    | Greater than            |
| `$lt`    | Less than               |
| `$gte`   | Greater than or equal   |
| `$lte`   | Less than or equal      |
| `$ne`    | Not equal               |
| `$in`    | In array                |
| `$nin`   | Not in array            |
| `$and`   | Logical AND             |
| `$or`    | Logical OR              |
| `$set`   | Update fields           |
| `$push`  | Add element to array    |
| `$inc`   | Increment numeric field |


{ timestamps: true } in Mongoose Schema
{ timestamps: true } automatically adds and manages createdAt and updatedAt fields for each document in a Mongoose schema.

What does it do?
When you enable timestamps in a schema, Mongoose automatically:
Adds createdAt ‚Üí when the document is first created
Adds updatedAt ‚Üí whenever the document is updated
You don‚Äôt need to define these fields manually.




{ new: true } in Mongoose
{ new: true } tells Mongoose to return the updated document, not the old one, after an update operation.

Where is { new: true } used?
It is mainly used with:
findByIdAndUpdate()
findOneAndUpdate()

Example
const updatedUser = await User.findByIdAndUpdate(
  id,
  { name: "Suyog Updated" },
  { new: true }
);

console.log(updatedUser);


Without { new: true }
Returns the old document (before update)

With { new: true }
Returns the updated document (after update)

Visual Difference
// Default behavior
User.findByIdAndUpdate(id, { age: 25 });
// ‚ûú returns document with old age

// With new: true
User.findByIdAndUpdate(id, { age: 25 }, { new: true });
// ‚ûú returns document with age = 25


Why is { new: true } important? ‚≠ê
‚úî Needed when you want to:
Send updated data in API response
Continue processing updated values
Avoid extra database queries



